"use strict";define([cardGame.gamePath+"js/views/common/Common.js",cardGame.gamePath+"js/models/Settings.js",cardGame.gamePath+"js/toolbox/Key.js",cardGame.gamePath+"js/models/Rules.js",cardGame.gamePath+"js/views/common/Sound.js"],function(e,a,s,c,n){return{manageSettings(){e.linearChoice({unbindOnEnter:!1},function(e){let t=cardGame.$container.find("#rule-description");switch(t.html(""),e.key){case s.ENTER:switch(e.choice){case 1:case 2:n.play(n.getKeys().SELECT),cardGame.$container.find("#setting-player-"+e.choice+" input").focus();break;case 3:n.play(n.getKeys().SELECT),cardGame.$container.find("#setting-audio .message__check").each(function(){$(this).toggleClass("message__check--enabled")});break;case 4:n.play(n.getKeys().SELECT),cardGame.$container.find("#setting-language .message__check").each(function(){$(this).toggleClass("message__check--enabled")});break;case 5:n.play(n.getKeys().SELECT);let s=cardGame.$container.find("#setting-difficulty .message__check"),i=s.filter(".message__check--enabled"),l=0!==i.next().length?i.next():s.first();s.removeClass("message__check--enabled"),l.addClass("message__check--enabled");break;case 6:case 7:case 8:case 9:case 10:let d=$(cardGame.$container.find(".select-choices__choice")[e.choice-1]).data("description");t.html(d),n.play(n.getKeys().SELECT),$(cardGame.$container.find(".select-choices__choice")[e.choice-1]).parent().toggleClass("message__check--enabled");break;default:a.setPlayer1Name(cardGame.$container.find("#setting-player-1 input").val()),a.setPlayer2Name(cardGame.$container.find("#setting-player-2 input").val()),cardGame.$container.find("#setting-audio-on").hasClass("message__check--enabled")?a.enableAudio():a.disableAudio(),a.setLanguage(cardGame.$container.find("#setting-language .message__check--enabled").data("langCode")),a.setDifficulty(cardGame.$container.find("#setting-difficulty .message__check--enabled").data("difficulty")),cardGame.$container.find("#rule-open").hasClass("message__check--enabled")?a.enableRule(c.getRules().OPEN):a.disableRule(c.getRules().OPEN),cardGame.$container.find("#rule-war").hasClass("message__check--enabled")?a.enableRule(c.getRules().WAR):a.disableRule(c.getRules().WAR),cardGame.$container.find("#rule-same").hasClass("message__check--enabled")?a.enableRule(c.getRules().SAME):a.disableRule(c.getRules().SAME),cardGame.$container.find("#rule-plus").hasClass("message__check--enabled")?a.enableRule(c.getRules().PLUS):a.disableRule(c.getRules().PLUS),cardGame.$container.find("#rule-combo").hasClass("message__check--enabled")?a.enableRule(c.getRules().COMBO):a.disableRule(c.getRules().COMBO),a.save(),logger.info("Settings updated"),e.unbind(),n.play(n.getKeys().SPECIAL),require([cardGame.gamePath+"js/lang/i18n_"+a.getLanguage()+".js"],function(e){window.cardGame.i18n=e,Routes.get(Routes.getKeys().DEFAULT)()})}break;case s.ESCAPE:e.unbind(),n.play(n.getKeys().CANCEL),Routes.get(Routes.getKeys().DEFAULT)();break;case s.UP:case s.DOWN:switch($("input").blur(),cardGame.$container.find(".board").focus(),e.choice){case 6:case 7:case 8:case 9:case 10:let a=$(cardGame.$container.find(".select-choices__choice")[e.choice-1]).data("description");t.html(a);break;default:t.text("")}}})}}});